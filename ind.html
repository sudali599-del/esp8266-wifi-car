<!DOCTYPE html>
<html>
<head>
  <title>ESP8266 WiFi Car</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body { text-align:center; font-family:Arial; background:#f0f0f0; }
    button {
      width:80px; height:80px;
      font-size:35px;
      margin:10px;
      border:none;
      border-radius:20px;
      background:#4CAF50;
      color:white;
    }
    .stop { background:red; }
  </style>

  <script>
    const ESP = "http://192.168.4.1";

    function send(cmd){
      fetch(ESP + cmd).catch(()=>alert("ESP not connected"));
    }

    function press(cmd){ send(cmd); }
    function release(){ send("/stop"); }

    function setSpeed(v){
      fetch(ESP + "/speed?value=" + v);
    }

    setInterval(()=>{
      fetch(ESP + "/sensors")
      .then(r=>r.json())
      .then(d=>{
        document.getElementById("dist").innerText = d.distance;
        document.getElementById("pir").innerText  = d.pir ? "Motion" : "No Motion";
        document.getElementById("gas").innerText  = d.gas;
      })
      .catch(()=>{});
    },1000);
  </script>
</head>

<body>
  <h2>ğŸš— ESP8266 WiFi Car ğŸš—</h2>

  <!-- CAMERA -->
  <img src="http://192.168.4.2:4747/video" width="320"><br><br>

  <!-- CONTROLS -->
  <button onmousedown="press('/forward')" onmouseup="release()">â¬†ï¸</button><br>
  <button onmousedown="press('/left')" onmouseup="release()">â¬…ï¸</button>
  <button class="stop" onclick="send('/stop')">â¹</button>
  <button onmousedown="press('/right')" onmouseup="release()">â¡ï¸</button><br>
  <button onmousedown="press('/backward')" onmouseup="release()">ğŸ”„</button>

  <h3>âš¡ Speed</h3>
  <input type="range" min="200" max="1023" value="800" step="50" oninput="setSpeed(this.value)">

  <h3>ğŸ“¡ Sensors</h3>
  Distance: <span id="dist">--</span> cm<br>
  PIR: <span id="pir">--</span><br>
  Gas: <span id="gas">--</span>
</body>
</html>
